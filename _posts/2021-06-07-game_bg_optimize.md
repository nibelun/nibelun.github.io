---
title: 【GMS】简易文本引擎——使用surface优化绘制
date: 2021-06-07 18:30:00 +0800
categories: [game]
tags: [game]
seo:
  date_modified:2021-06-07 18:30:00 +0800
---

------------

### 文字部分TODOLIST ###

- ~~输出中文字符~~
- ~~文字加载动画~~
- ~~文字颜色设置~~
- ~~文字翻页~~
- ~~对话框适配（宽高与定位适配）~~
- ~~对话框sprit绘制~~
- 对话框插入头像与小图标图片

------------

在上一次绘制中，由于需要实现文字滚动效果，文字部分使用的是动态绘制——即每一“帧”的绘制都会在下一次刷新后重新重置。但是人物立绘与聊天窗口在绘制的过程中并未需要动画效果，每次刷新后，对话框会需要重新计算相同的坐标和使用相同的图片绘制相同的图案，对绘制会有一定程度的计算资源浪费，因此可以使用surface将对话框一次绘制后，后续在对话结束之前重复使用。

基于原来的代码进行以下调整。
![2021060701](/assets/img/post/2021060701.png)
![2021060702](/assets/img/post/2021060702.png)
![2021060703](/assets/img/post/2021060703.png)

缓存的使用也需要保持有主动释放的习惯。
![2021060704](/assets/img/post/2021060704.png)

虽然在性能上，一个对话框的绘制不会给整体带来太多影响，但保持一个良好的资源利用习惯，积小成多，则会对以后的开发有十分可观的收益。